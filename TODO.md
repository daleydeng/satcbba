咱们重新设计一下通讯模式。manager下发任务到syncer里面，syncer再广播到agent上面。agent都ready好后，syncer确认好以后，发给manager说好了。这是举例派发任务的阶段。然后manager下发bundle construction, syncer收到以后，让Agents开始进行第一阶段，结束后syncer确认agents都结束了，然后反馈给manager, 就这么，每步都是由manager发起给到syncer, syncer同步所有agent的节奏。其中如果发生了很多日志，则agent传到自己的日志topic上，syncer也发到自己的日志topic上。manager用于收集大家的日志，并且统一日志处理。agent写出去的信息，应该都是keyed, 正好以agent_id作为key, syncer就可以根据此，来决定所有agent是否执行完这步